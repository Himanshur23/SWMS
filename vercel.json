{
  "builds": [
    {
      "use": "@vercel/python",
      "entrypoint": "app.app:app",
      "command": "python -m pip install --upgrade pip && pip install -r requirements.txt",
      "env": {
        "RUSTUP_HOME": "/tmp/rustup_home",
        "CARGO_HOME": "/tmp/cargo_home",
        "PATH": "/tmp/cargo_home/bin:$PATH"
      },
      "subdirectories": {
        "api": "./api"
      }
    }
  ],
  "build": {
    "command": [
      "curl https://sh.rustup.rs -sSf | sh -s -- -y",
      "source $HOME/.cargo/env",
      "cargo install --path ./api"
    ]
  },
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "/api/:1"
    }
  ]
}